{"version":3,"file":"flextype/view.js","mappings":"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","sources":["webpack://flextype/./src/flextype/view.js"],"sourcesContent":["/* global localStorage */\n/**\n * FlexType Frontend JavaScript\n *\n * Handles text resizing controls on the frontend.\n */\n\n(function () {\n\t'use strict';\n\n\tconst STORAGE_KEY = 'flextypeScale';\n\tconst CSS_PROPERTY = '--flextype-scale';\n\tconst STYLE_ID = 'flextype-scale-styles';\n\tconst BLOCK_SELECTOR = '.wp-block-flextype-text-resizer';\n\n\t// Text elements to scale\n\tconst TEXT_ELEMENTS = [\n\t\t'h1',\n\t\t'h2',\n\t\t'h3',\n\t\t'h4',\n\t\t'h5',\n\t\t'h6',\n\t\t'p',\n\t\t'li',\n\t\t'td',\n\t\t'th',\n\t\t'dd',\n\t\t'dt',\n\t\t'blockquote',\n\t\t'figcaption',\n\t];\n\n\t// Template part selectors to exclude when scaleScope is 'exclude-template'\n\tconst TEMPLATE_PART_SELECTORS = [\n\t\t'header',\n\t\t'.site-header',\n\t\t'.wp-block-template-part[data-slug=\"header\"]',\n\t\t'footer',\n\t\t'.site-footer',\n\t\t'.wp-block-template-part[data-slug=\"footer\"]',\n\t\t'nav',\n\t\t'.site-navigation',\n\t\t'.wp-block-navigation',\n\t\t'#wpadminbar',\n\t];\n\n\t/**\n\t * Get or create the dynamic style element\n\t *\n\t * @return {HTMLStyleElement} The style element\n\t */\n\tfunction getStyleElement() {\n\t\tlet styleEl = document.getElementById(STYLE_ID);\n\t\tif (!styleEl) {\n\t\t\tstyleEl = document.createElement('style');\n\t\t\tstyleEl.id = STYLE_ID;\n\t\t\tdocument.head.appendChild(styleEl);\n\t\t}\n\t\treturn styleEl;\n\t}\n\n\t/**\n\t * Build exclusion selector for template parts\n\t *\n\t * @param {string} element The text element to build exclusion for\n\t * @return {string} CSS selector with exclusions\n\t */\n\tfunction buildExclusionSelector(element) {\n\t\tconst exclusions = TEMPLATE_PART_SELECTORS.map(\n\t\t\t(tpl) => `:not(${tpl} ${element})`\n\t\t).join('');\n\t\treturn `body ${element}${exclusions}`;\n\t}\n\n\t/**\n\t * Apply scale to target element and inject scaling CSS\n\t *\n\t * @param {number} scale        Scale value to apply\n\t * @param {string} scaleScope   Scale scope setting ('full-page' or 'exclude-template')\n\t * @param {string} customTarget Custom CSS selector (overrides scaleScope if provided)\n\t */\n\tfunction applyScale(scale, scaleScope, customTarget) {\n\t\t// Set CSS custom property on :root for reference\n\t\tdocument.documentElement.style.setProperty(CSS_PROPERTY, scale);\n\n\t\t// Get or create style element\n\t\tconst styleEl = getStyleElement();\n\n\t\t// If scale is 1 (default), remove scaling styles to preserve theme defaults\n\t\tif (Math.abs(scale - 1) < 0.01) {\n\t\t\tstyleEl.textContent = '';\n\t\t\treturn;\n\t\t}\n\n\t\t// Build the selector based on scope\n\t\tlet selector;\n\n\t\tif (customTarget && customTarget.trim() !== '') {\n\t\t\t// Custom target selector takes precedence\n\t\t\tselector = TEXT_ELEMENTS.map((el) => `${customTarget} ${el}`).join(\n\t\t\t\t', '\n\t\t\t);\n\t\t} else if (scaleScope === 'exclude-template') {\n\t\t\t// Exclude template parts (header, footer, nav)\n\t\t\tselector = TEXT_ELEMENTS.map((el) =>\n\t\t\t\tbuildExclusionSelector(el)\n\t\t\t).join(', ');\n\t\t} else {\n\t\t\t// Full page: target all text elements but exclude admin bar\n\t\t\tselector = TEXT_ELEMENTS.map(\n\t\t\t\t(el) => `body ${el}:not(#wpadminbar ${el})`\n\t\t\t).join(', ');\n\t\t}\n\n\t\t// Inject CSS that scales text elements using zoom\n\t\t// Zoom multiplies the element's rendered size without affecting layout flow\n\t\t// This preserves the theme's font-size values while scaling the visual output\n\t\tstyleEl.textContent = `\n\t\t\t${selector} {\n\t\t\t\tzoom: ${scale};\n\t\t\t}\n\t\t`;\n\t}\n\n\t/**\n\t * Save scale preference to localStorage\n\t *\n\t * @param {number} scale Scale value to save\n\t */\n\tfunction saveScale(scale) {\n\t\ttry {\n\t\t\tlocalStorage.setItem(STORAGE_KEY, scale.toString());\n\t\t} catch (e) {\n\t\t\t// localStorage not available, fail silently\n\t\t}\n\t}\n\n\t/**\n\t * Get saved scale from localStorage\n\t *\n\t * @return {number|null} Saved scale or null if not found\n\t */\n\tfunction getSavedScale() {\n\t\ttry {\n\t\t\tconst saved = localStorage.getItem(STORAGE_KEY);\n\t\t\tif (saved) {\n\t\t\t\tconst scale = parseFloat(saved);\n\t\t\t\tif (!isNaN(scale)) {\n\t\t\t\t\treturn scale;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// localStorage not available\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Update active states on button controls\n\t *\n\t * @param {HTMLElement} container Block container element\n\t * @param {number}      scale     Current scale value\n\t */\n\tfunction updateButtonStates(container, scale) {\n\t\tconst buttons = container.querySelectorAll(\n\t\t\t'.wp-block-flextype-text-resizer__button'\n\t\t);\n\t\tbuttons.forEach((button) => {\n\t\t\tconst buttonScale = parseFloat(button.dataset.scale);\n\t\t\tconst isActive = Math.abs(buttonScale - scale) < 0.01;\n\t\t\tbutton.classList.toggle(\n\t\t\t\t'wp-block-flextype-text-resizer__button--active',\n\t\t\t\tisActive\n\t\t\t);\n\t\t\tbutton.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n\t\t});\n\t}\n\n\t/**\n\t * Update active states on icon controls\n\t *\n\t * @param {HTMLElement} container Block container element\n\t * @param {number}      scale     Current scale value\n\t * @param {number}      minScale  Minimum scale\n\t * @param {number}      maxScale  Maximum scale\n\t */\n\tfunction updateIconStates(container, scale, minScale, maxScale) {\n\t\tconst resetButton = container.querySelector('[data-action=\"reset\"]');\n\t\tif (resetButton) {\n\t\t\tconst isDefault = Math.abs(scale - 1) < 0.01;\n\t\t\tresetButton.classList.toggle(\n\t\t\t\t'wp-block-flextype-text-resizer__icon-button--active',\n\t\t\t\tisDefault\n\t\t\t);\n\t\t\tresetButton.setAttribute(\n\t\t\t\t'aria-pressed',\n\t\t\t\tisDefault ? 'true' : 'false'\n\t\t\t);\n\t\t}\n\n\t\t// Update disabled states for min/max\n\t\tconst decreaseBtn = container.querySelector('[data-action=\"decrease\"]');\n\t\tconst increaseBtn = container.querySelector('[data-action=\"increase\"]');\n\n\t\tif (decreaseBtn) {\n\t\t\tdecreaseBtn.disabled = scale <= minScale;\n\t\t}\n\t\tif (increaseBtn) {\n\t\t\tincreaseBtn.disabled = scale >= maxScale;\n\t\t}\n\t}\n\n\t/**\n\t * Update slider value\n\t *\n\t * @param {HTMLElement} container Block container element\n\t * @param {number}      scale     Current scale value\n\t */\n\tfunction updateSliderValue(container, scale) {\n\t\tconst slider = container.querySelector(\n\t\t\t'.wp-block-flextype-text-resizer__slider'\n\t\t);\n\t\tif (slider) {\n\t\t\tslider.value = scale;\n\t\t}\n\t}\n\n\t/**\n\t * Update all controls in all blocks\n\t *\n\t * @param {number} scale Current scale value\n\t */\n\tfunction updateAllControls(scale) {\n\t\tconst blocks = document.querySelectorAll(BLOCK_SELECTOR);\n\t\tblocks.forEach((container) => {\n\t\t\tconst controlStyle = container.dataset.controlStyle;\n\t\t\tconst minScale = parseFloat(container.dataset.minScale);\n\t\t\tconst maxScale = parseFloat(container.dataset.maxScale);\n\n\t\t\tif (controlStyle === 'dropdown') {\n\t\t\t\tupdateDropdownValue(container, scale);\n\t\t\t} else if (controlStyle === 'buttons') {\n\t\t\t\tupdateButtonStates(container, scale);\n\t\t\t} else if (controlStyle === 'slider') {\n\t\t\t\tupdateSliderValue(container, scale);\n\t\t\t} else if (controlStyle === 'icons') {\n\t\t\t\tupdateIconStates(container, scale, minScale, maxScale);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Initialize buttons control style\n\t *\n\t * @param {HTMLElement} container    Block container element\n\t * @param {string}      scaleScope   Scale scope setting\n\t * @param {string}      customTarget Custom target selector\n\t * @param {number}      currentScale Current scale value\n\t */\n\tfunction initButtons(container, scaleScope, customTarget, currentScale) {\n\t\tconst buttons = container.querySelectorAll(\n\t\t\t'.wp-block-flextype-text-resizer__button'\n\t\t);\n\n\t\tbuttons.forEach((button) => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tconst scale = parseFloat(button.dataset.scale);\n\t\t\t\tapplyScale(scale, scaleScope, customTarget);\n\t\t\t\tsaveScale(scale);\n\t\t\t\tupdateAllControls(scale);\n\t\t\t});\n\t\t});\n\n\t\t// Set initial active state\n\t\tupdateButtonStates(container, currentScale);\n\t}\n\n\t/**\n\t * Initialize slider control style\n\t *\n\t * @param {HTMLElement} container    Block container element\n\t * @param {string}      scaleScope   Scale scope setting\n\t * @param {string}      customTarget Custom target selector\n\t * @param {number}      currentScale Current scale value\n\t */\n\tfunction initSlider(container, scaleScope, customTarget, currentScale) {\n\t\tconst slider = container.querySelector(\n\t\t\t'.wp-block-flextype-text-resizer__slider'\n\t\t);\n\n\t\tif (!slider) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set initial value\n\t\tslider.value = currentScale;\n\n\t\t// Update on input (while dragging)\n\t\tslider.addEventListener('input', () => {\n\t\t\tconst scale = parseFloat(slider.value);\n\t\t\tapplyScale(scale, scaleScope, customTarget);\n\t\t\tupdateAllControls(scale);\n\t\t});\n\n\t\t// Save on change (when released)\n\t\tslider.addEventListener('change', () => {\n\t\t\tconst scale = parseFloat(slider.value);\n\t\t\tsaveScale(scale);\n\t\t});\n\t}\n\n\t/**\n\t * Update dropdown value\n\t *\n\t * @param {HTMLElement} container Block container element\n\t * @param {number}      scale     Current scale value\n\t */\n\tfunction updateDropdownValue(container, scale) {\n\t\tconst select = container.querySelector(\n\t\t\t'.wp-block-flextype-text-resizer__select'\n\t\t);\n\t\tif (select) {\n\t\t\tselect.value = scale;\n\t\t}\n\t}\n\n\t/**\n\t * Initialize dropdown control style\n\t *\n\t * @param {HTMLElement} container    Block container element\n\t * @param {string}      scaleScope   Scale scope setting\n\t * @param {string}      customTarget Custom target selector\n\t * @param {number}      currentScale Current scale value\n\t */\n\tfunction initDropdown(container, scaleScope, customTarget, currentScale) {\n\t\tconst select = container.querySelector(\n\t\t\t'.wp-block-flextype-text-resizer__select'\n\t\t);\n\n\t\tif (!select) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set initial value\n\t\tselect.value = currentScale;\n\n\t\t// Update on change\n\t\tselect.addEventListener('change', () => {\n\t\t\tconst scale = parseFloat(select.value);\n\t\t\tapplyScale(scale, scaleScope, customTarget);\n\t\t\tsaveScale(scale);\n\t\t\tupdateAllControls(scale);\n\t\t});\n\t}\n\n\t/**\n\t * Initialize icons control style\n\t *\n\t * @param {HTMLElement} container    Block container element\n\t * @param {string}      scaleScope   Scale scope setting\n\t * @param {string}      customTarget Custom target selector\n\t * @param {number}      currentScale Current scale value\n\t * @param {number}      minScale     Minimum scale\n\t * @param {number}      maxScale     Maximum scale\n\t */\n\tfunction initIcons(\n\t\tcontainer,\n\t\tscaleScope,\n\t\tcustomTarget,\n\t\tcurrentScale,\n\t\tminScale,\n\t\tmaxScale\n\t) {\n\t\tconst step = 0.1;\n\n\t\tconst decreaseBtn = container.querySelector('[data-action=\"decrease\"]');\n\t\tconst resetBtn = container.querySelector('[data-action=\"reset\"]');\n\t\tconst increaseBtn = container.querySelector('[data-action=\"increase\"]');\n\n\t\tlet scale = currentScale;\n\n\t\tif (decreaseBtn) {\n\t\t\tdecreaseBtn.addEventListener('click', () => {\n\t\t\t\tscale = Math.max(minScale, scale - step);\n\t\t\t\tscale = Math.round(scale * 100) / 100;\n\t\t\t\tapplyScale(scale, scaleScope, customTarget);\n\t\t\t\tsaveScale(scale);\n\t\t\t\tupdateAllControls(scale);\n\t\t\t});\n\t\t}\n\n\t\tif (resetBtn) {\n\t\t\tresetBtn.addEventListener('click', () => {\n\t\t\t\tscale = 1;\n\t\t\t\tapplyScale(scale, scaleScope, customTarget);\n\t\t\t\tsaveScale(scale);\n\t\t\t\tupdateAllControls(scale);\n\t\t\t});\n\t\t}\n\n\t\tif (increaseBtn) {\n\t\t\tincreaseBtn.addEventListener('click', () => {\n\t\t\t\tscale = Math.min(maxScale, scale + step);\n\t\t\t\tscale = Math.round(scale * 100) / 100;\n\t\t\t\tapplyScale(scale, scaleScope, customTarget);\n\t\t\t\tsaveScale(scale);\n\t\t\t\tupdateAllControls(scale);\n\t\t\t});\n\t\t}\n\n\t\t// Set initial states\n\t\tupdateIconStates(container, currentScale, minScale, maxScale);\n\t}\n\n\t/**\n\t * Initialize a single FlexType block\n\t *\n\t * @param {HTMLElement} container Block container element\n\t */\n\tfunction initBlock(container) {\n\t\tconst scaleScope = container.dataset.scaleScope || 'exclude-template';\n\t\tconst customTarget = container.dataset.targetSelector || '';\n\t\tconst controlStyle = container.dataset.controlStyle || 'buttons';\n\t\tconst minScale = parseFloat(container.dataset.minScale) || 1;\n\t\tconst maxScale = parseFloat(container.dataset.maxScale) || 1.2;\n\n\t\t// Get saved scale or use default (1.0)\n\t\tlet currentScale = getSavedScale();\n\t\tif (currentScale === null) {\n\t\t\tcurrentScale = 1;\n\t\t}\n\n\t\t// Clamp to valid range\n\t\tcurrentScale = Math.max(minScale, Math.min(maxScale, currentScale));\n\n\t\t// Apply saved scale (only injects CSS if scale !== 1)\n\t\tapplyScale(currentScale, scaleScope, customTarget);\n\n\t\t// Initialize based on control style\n\t\tif (controlStyle === 'dropdown') {\n\t\t\tinitDropdown(container, scaleScope, customTarget, currentScale);\n\t\t} else if (controlStyle === 'buttons') {\n\t\t\tinitButtons(container, scaleScope, customTarget, currentScale);\n\t\t} else if (controlStyle === 'slider') {\n\t\t\tinitSlider(container, scaleScope, customTarget, currentScale);\n\t\t} else if (controlStyle === 'icons') {\n\t\t\tinitIcons(\n\t\t\t\tcontainer,\n\t\t\t\tscaleScope,\n\t\t\t\tcustomTarget,\n\t\t\t\tcurrentScale,\n\t\t\t\tminScale,\n\t\t\t\tmaxScale\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Handle storage events for cross-tab sync\n\t *\n\t * @param {StorageEvent} event Storage event\n\t */\n\tfunction handleStorageChange(event) {\n\t\tif (event.key !== STORAGE_KEY) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst scale = parseFloat(event.newValue);\n\t\tif (isNaN(scale)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get scope settings from first block\n\t\tconst firstBlock = document.querySelector(BLOCK_SELECTOR);\n\t\tconst scaleScope = firstBlock\n\t\t\t? firstBlock.dataset.scaleScope || 'exclude-template'\n\t\t\t: 'exclude-template';\n\t\tconst customTarget = firstBlock\n\t\t\t? firstBlock.dataset.targetSelector || ''\n\t\t\t: '';\n\n\t\tapplyScale(scale, scaleScope, customTarget);\n\t\tupdateAllControls(scale);\n\t}\n\n\t/**\n\t * Initialize all FlexType blocks on the page\n\t */\n\tfunction init() {\n\t\tconst blocks = document.querySelectorAll(BLOCK_SELECTOR);\n\n\t\tif (blocks.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Initialize each block\n\t\tblocks.forEach(initBlock);\n\n\t\t// Listen for storage changes (cross-tab sync)\n\t\twindow.addEventListener('storage', handleStorageChange);\n\t}\n\n\t// Initialize when DOM is ready\n\tif (document.readyState === 'loading') {\n\t\tdocument.addEventListener('DOMContentLoaded', init);\n\t} else {\n\t\tinit();\n\t}\n})();\n"],"names":["STORAGE_KEY","CSS_PROPERTY","STYLE_ID","BLOCK_SELECTOR","TEXT_ELEMENTS","TEMPLATE_PART_SELECTORS","getStyleElement","styleEl","document","getElementById","createElement","id","head","appendChild","buildExclusionSelector","element","exclusions","map","tpl","join","applyScale","scale","scaleScope","customTarget","documentElement","style","setProperty","Math","abs","textContent","selector","trim","el","saveScale","localStorage","setItem","toString","e","getSavedScale","saved","getItem","parseFloat","isNaN","updateButtonStates","container","buttons","querySelectorAll","forEach","button","buttonScale","dataset","isActive","classList","toggle","setAttribute","updateIconStates","minScale","maxScale","resetButton","querySelector","isDefault","decreaseBtn","increaseBtn","disabled","updateSliderValue","slider","value","updateAllControls","blocks","controlStyle","updateDropdownValue","initButtons","currentScale","addEventListener","initSlider","select","initDropdown","initIcons","step","resetBtn","max","round","min","initBlock","targetSelector","handleStorageChange","event","key","newValue","firstBlock","init","length","window","readyState"],"ignoreList":[],"sourceRoot":""}